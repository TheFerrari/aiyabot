                else:
                    generated = str(res)

            return prompt + generated

    def get_random_word(self, filename):
        chosen_line = None
        try:
            with open(filename, newline='', encoding='utf-8') as csvfile:
                reader = csv.reader(csvfile)
                for count, row in enumerate(reader, start=1):
                    # With probability 1/count, choose the current row
                    if row and random.randrange(count) == 0:
                        chosen_line = row
        except Exception as e:
            print(f"Error reading file: {e}")
            return None

        return chosen_line[0] if chosen_line else None

    @commands.Cog.listener()
    async def on_ready(self):
        self.bot.add_view(viewhandler.DrawView(self))

    @commands.slash_command(name='draw', description='Create an image')
    @option(
        'prompt',
        str,
        description='A prompt to condition the model with.',
        required=False,
    )
    @option(
        'random_prompt',
        str,
        description='Generate a random image from a random prompt.',
        required=False,
        choices=['True', 'Infinite']
    )
    @option(
        'negative_prompt',
        str,
        description='Negative prompts to exclude from output.',
        required=False,
    )
    @option(
        'data_model',
        str,
        description='Select the data model for image generation.',
        required=False,
        autocomplete=discord.utils.basic_autocomplete(settingscog.SettingsCog.model_autocomplete),
    )
    @option(
        'steps',
        int,
        description='The amount of steps to sample the model.',
        min_value=1,
        required=False,
    )
    @option(
        'width',
        int,
        description='Width of the generated image.',
        required=False,
        autocomplete=size_auto,
        choices=settings.global_var.size_range
    )
    @option(
        'height',
        int,
        description='Height of the generated image.',
        required=False,
        autocomplete=size_auto,
        choices=settings.global_var.size_range
    )
    @option(
        'size_ratio',
        str,
        description='Select a size ratio for image generation. This overrides width & height!',
        required=False,
        choices=list(size_ratios.keys())
    )
    @option(
        'guidance_scale',
        str,
        description='Classifier-Free Guidance scale.',
        required=False,
    )
    @option(
        'distilled_cfg_scale',
        str,
        description='Distilled CFG Guidance scale.',
        required=False,
    )
    @option(
        'sampler',
        str,
        description='The sampling method to use for generation.',
        required=False,
        autocomplete=discord.utils.basic_autocomplete(settingscog.SettingsCog.sampler_autocomplete),
    )
    @option(
        'scheduler',
        str,
        description='The schedule type to use for generation.',
        required=False,
        autocomplete=discord.utils.basic_autocomplete(settingscog.SettingsCog.scheduler_autocomplete),
    )
    @option(
        'seed',
        int,
        description='The seed to use for reproducibility.',
        required=False,
    )
    @option(
        'styles',
        str,
        description='Apply a predefined style to the generation.',
        required=False,
        autocomplete=discord.utils.basic_autocomplete(settingscog.SettingsCog.style_autocomplete),
    )
